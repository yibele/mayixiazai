<!-- miniprogram/pages/index/index.wxml -->

  <t-navbar title="蚂蚁下载器" fixed />
<view class="page-container">
  <t-dialog id="t-dialog" />

  <!-- 输入区域 -->
  <view class="input-card">
    <t-input
      class="input-field"
      value="{{link}}"
      bind:change="onLinkInput"
      placeholder="请在此处粘贴视频或图文分享链接"
      clearable
    />
    <!-- 按钮组 -->
    <view class="button-group">
      <t-button
        class="action-btn"
        theme="primary"
        loading="{{isLoading}}"
        bind:tap="startParse"
      >
        开始分析
      </t-button>
      <t-button
        class="action-btn"
        theme="default"
        bind:tap="clearInput"
      >
        清空
      </t-button>
      <t-button
        class="action-btn"
        theme="primary"
        variant="outline"
        bind:tap="pasteFromClipboard"
      >
        一键粘贴
      </t-button>
    </view>
  </view>

  <!-- 功能卡片 -->
  <view class="feature-cards">
    <view class="feature-card" bind:tap="goToTextExtract">
      <view class="card-title">文案提取</view>
      <view class="card-desc">快速提取视频文案内容</view>
    </view>
    
    <view class="feature-card" bind:tap="goToBatchAnalysis">
      <view class="card-title">批量解析</view>
      <view class="card-desc">一键解析用户所有视频</view>
    </view>
    
    <view class="feature-card" bind:tap="goToTutorial">
      <view class="card-title">使用教程</view>
      <view class="card-desc">详细使用说明指南</view>
    </view>
    
    <view class="feature-card" bind:tap="shareToFriend">
      <view class="card-title">分享给朋友</view>
      <view class="card-desc">邀请好友获得积分奖励</view>
    </view>
  </view>

  <!-- 解析结果弹窗 -->
  <t-popup 
    visible="{{showResultPopup}}" 
    bind:visible-change="onResultPopupVisibleChange"
    placement="bottom" 
    close-on-overlay-click="{{true}}"
    class="result-popup"
  >
    <view class="popup-content">
      <view class="popup-header">
        <view class="popup-title">解析结果</view>
        <t-icon name="close" class="close-icon" bind:tap="hideResultPopup" />
      </view>
      
      <view class="result-card">
        <t-image class="video-cover" src="{{videoInfo.cover}}" mode="aspectFill" />
        <view class="video-details">
          <view class="video-title">{{videoInfo.title}}</view>
          <view class="author-info">
            <t-avatar size="small" image="{{videoInfo.authorAvatar}}" />
            <view class="author-name">{{videoInfo.author}}</view>
          </view>
        </view>
        <view class="action-buttons">
          <t-button theme="primary" block bind:tap="goToDownload">
            <t-icon name="download" slot="icon"/>
            下载视频
          </t-button>
          <t-button theme="default" block bind:tap="copyText" style="margin-top: 16rpx;">
            <t-icon name="file-copy" slot="icon"/>
            复制文案
          </t-button>
        </view>
      </view>
    </view>
  </t-popup>



  <!-- 页脚 -->
  <t-footer
    class="page-footer"
    text="本服务仅供个人学习与收藏，请勿用于商业用途。"
  ></t-footer>
</view>
