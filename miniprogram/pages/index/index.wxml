<!-- miniprogram/pages/index/index.wxml -->
<view class="page-container">
  <t-dialog id="t-dialog" />

  <!-- Logo 和标题 -->
  <view class="header" style="background-image: url('/imgs/logo.png');">
    <view class="app-title">蚂蚁下载器</view>
  </view>

  <!-- 输入区域 -->
  <view class="input-card">
    <t-input
      class="input-field"
      value="{{link}}"
      bind:change="onLinkInput"
      placeholder="请在此处粘贴视频或图文分享链接"
      clearable
      prefix-icon="link"
    />
    <!-- 按钮组 -->
    <view class="button-group">
      <t-button
        class="action-btn"
        theme="primary"
        loading="{{isLoading}}"
        bind:tap="startParse"
      >
        开始分析
      </t-button>
      <t-button
        class="action-btn"
        theme="default"
        bind:tap="clearInput"
      >
        清空
      </t-button>
      <t-button
        class="action-btn"
        theme="primary"
        variant="outline"
        bind:tap="pasteFromClipboard"
      >
        一键粘贴
      </t-button>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <t-loading text="正在为您努力解析中..." size="40rpx" />
  </view>

  <!-- 解析结果 -->
  <view class="result-card" wx:if="{{!isLoading && videoInfo}}">
    <t-image class="video-cover" src="{{videoInfo.cover}}" mode="aspectFill" />
    <view class="video-details">
      <view class="video-title">{{videoInfo.title}}</view>
      <view class="author-info">
        <t-avatar size="small" image="{{videoInfo.authorAvatar}}" />
        <view class="author-name">{{videoInfo.author}}</view>
      </view>
    </view>
    <view class="action-buttons">
      <t-button theme="primary" block bind:tap="goToDownload">
        <t-icon name="download" slot="icon"/>
        下载视频
      </t-button>
    </view>
  </view>



  <!-- 页脚 -->
  <t-footer
    class="page-footer"
    text="本服务仅供个人学习与收藏，请勿用于商业用途。"
  ></t-footer>
</view>
